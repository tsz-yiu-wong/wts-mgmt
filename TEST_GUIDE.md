# 🧪 测试指南

## 测试模式说明
当前系统在**测试模式**下运行，因为还没有配置Supabase。在测试模式下：
- 不需要真实的数据库连接
- 使用模拟数据和响应
- 可以完整测试UI流程
- 控制台会显示 `[测试模式]` 日志

## 🚀 开始测试

### 1. 启动开发服务器
```bash
npm run dev
```

### 2. 访问应用
打开浏览器访问：http://localhost:3000

## 📱 功能测试

### ✅ 添加账号功能测试

1. **点击"添加账号"按钮**
   - 在主页面或账号页面点击"添加账号"
   - 应该打开添加账号对话框

2. **输入电话号码**
   - 输入格式：`+86 13812345678`
   - 点击"开始登录"按钮

3. **验证码获取流程**
   - 等待几秒钟，系统会显示"正在获取验证码..."
   - 然后会显示一个8位数字验证码
   - 控制台会显示生成的验证码

4. **等待登录完成**
   - 系统会自动模拟登录完成
   - 成功后会添加一个新账号到列表

### ✅ 打开窗口功能测试

1. **找到已添加的账号**
   - 在账号列表中找到刚添加的账号

2. **点击"打开"按钮**
   - 点击账号旁边的"打开"按钮
   - 按钮会显示"打开中..."状态

3. **验证窗口打开**
   - 应该会在新标签页中打开WhatsApp Web
   - 控制台会显示打开的URL

### ✅ 其他功能测试

1. **删除账号**
   - 点击账号的三点菜单
   - 选择"删除"
   - 确认删除操作

2. **健康检查**
   - 访问：http://localhost:3000/api/health
   - 应该返回服务状态信息

## 🔍 测试要点

### UI测试
- [ ] 添加账号对话框正确打开和关闭
- [ ] 电话号码格式验证工作正常
- [ ] 验证码正确显示
- [ ] 账号列表正确更新
- [ ] 打开按钮状态变化正确
- [ ] 删除功能工作正常

### API测试
- [ ] `/api/automation/login` - 登录初始化
- [ ] `/api/automation/verification` - 验证码获取
- [ ] `/api/automation/complete` - 登录完成
- [ ] `/api/automation/windows` - 窗口管理
- [ ] `/api/health` - 健康检查

### 错误处理测试
- [ ] 输入错误的电话号码格式
- [ ] 网络错误处理
- [ ] 会话超时处理

## 📊 控制台日志

在测试过程中，查看浏览器控制台和终端输出：

**浏览器控制台应显示：**
```
[测试模式] 模拟启动登录流程: +86 13812345678
[测试模式] 生成验证码: 12345678
[测试模式] 模拟账号创建成功: +86 13800138000
[测试模式] 模拟打开窗口: https://web.whatsapp.com/
```

**终端输出应显示：**
```
- ready started server on 0.0.0.0:3000
- Local:        http://localhost:3000
```

## 🐛 常见问题

### 问题1：组件无法找到
**症状：** 页面显示组件导入错误
**解决：** 检查所有UI组件是否正确导入

### 问题2：API调用失败
**症状：** 网络错误或500错误
**解决：** 检查API路由代码和控制台错误信息

### 问题3：样式显示异常
**症状：** UI组件样式不正确
**解决：** 检查Tailwind CSS配置和组件类名

### 问题4：测试模式不工作
**症状：** 仍然尝试连接真实数据库
**解决：** 确保 `.env.local` 中的 `NEXT_PUBLIC_SUPABASE_URL` 为默认值

## ✅ 成功标准

测试成功的标准：
1. 可以成功添加账号（模拟流程）
2. 可以获取验证码（模拟8位数字）
3. 可以完成登录（创建模拟账号）
4. 可以打开窗口（跳转到WhatsApp Web）
5. 可以删除账号
6. 所有UI交互流畅无错误
7. 控制台无重要错误信息

## 🚀 下一步

测试完成后，可以：
1. 配置真实的Supabase数据库
2. 部署到Railway或其他平台
3. 添加更多功能和优化

---

**注意：** 当前是测试模式，不会进行真实的WhatsApp登录。要进行真实测试，需要配置Supabase数据库。 